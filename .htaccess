# Ensure proper MIME types
AddType text/css .css
AddType application/javascript .js
AddType application/json .json

# Enable compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/javascript
    AddOutputFilterByType DEFLATE application/json
</IfModule>

# Set proper cache headers
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType text/css "access plus 1 year"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType text/javascript "access plus 1 year"
    ExpiresByType application/json "access plus 1 month"
</IfModule>

# Ensure proper handling of static assets
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Handle Next.js static assets
    RewriteRule ^_next/static/(.*)$ _next/static/$1 [L]
    
    # Handle other static files
    RewriteRule ^(.*\.(css|js|json|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot))$ $1 [L]
    
    # Prevent access to source files
    RewriteRule ^(.*\.(ts|tsx|jsx))$ - [F,L]
</IfModule>

# Security headers
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
</IfModule>